"use strict";function Task(t){this.id=t&&t.id||Math.random().toString(36).substr(2,9),this.title=t&&t.title||"",this.description=t&&t.description||"",this.order=t&&t.order||""}var DOM={$body:document.querySelector("body"),$taskDetail:document.querySelector(".task-detail"),$listTasks:document.querySelector("#tasksList"),$tasks:document.querySelectorAll("#tasksList span"),$buttonAddTask:document.querySelector("#addTask"),$buttonCloseTask:document.querySelector("#closeTask"),$idTaskDetail:document.querySelector("#idTaskDetail"),$titleTaskDetail:document.querySelector("#titleTaskDetail"),$descriptionTaskDetail:document.querySelector("#descriptionTaskDetail")};HTMLElement.prototype.show=function(){return this.style.display=""},HTMLElement.prototype.hide=function(){return this.style.display="none"},Array.prototype.last=function(){return this[this.length-1]},function(t){var e={tasks:null,init:function(){localStorage.todo||(localStorage.todo=JSON.stringify([new Task({title:"Make it better!",description:"Lorem dfshufdhsua fds hfdhsau df",order:1}),new Task({title:"Work it harder",description:"Lorem dfshufdhsua fds hfdhsau df",order:0})])),this.tasks=JSON.parse(localStorage.todo)},getTasksLength:function(){return this.tasks.length},orderBy:function(t,e){var s=t.order,a=e.order;return s<a?-1:s>a?1:0},listTasks:function(){return this.tasks.sort(this.orderBy)},getTask:function(t){return this.tasks.find(function(e){return t==e.id})},getLastTask:function(){return this.listTasks().last()},createTask:function(t){this.tasks.push(new Task(t))},updateTask:function(t){var e=this.getTask(t.id),s=this.tasks.indexOf(e);this.tasks[s].title=t.title,this.tasks[s].description=t.description,this.updateLocalStorage()},removeTask:function(t){var e=this.getTask(t),s=this.tasks.indexOf(e);this.tasks.splice(s,1),this.updateLocalStorage()},updateLocalStorage:function(){localStorage.todo=JSON.stringify(this.tasks)}},s={init:function(){console.log("%c --- App Init ---","font-size: 14px; color:#ff7381;"),console.log("%c Name: Thiago Capelo","font-size:12px;"),console.log("%c [ Github, Codepen ]: @thiagokpelo","font-size:10px;"),console.log("%c [ Whats ]: (55 11) 9 9901 4998","font-size:10px;"),console.log("%c Obrigado!! %s","font-size:12px;color:#ff7381","ðŸ––"),e.init(),a.init()},listTasks:function(){return e.listTasks()},getTask:function(t){return e.getTask(t)},getLastTask:function(){return e.getLastTask()},createTask:function(t,s){e.createTask(t),s()},updateTask:function(t,s){e.updateTask(t),s()},completedTask:function(t,s){e.removeTask(t),s()},getTasksLength:function(){return e.getTasksLength()}},a={init:function(){t.$taskDetail.hide(),a.createListTasks(),t.$buttonAddTask.addEventListener("click",a.openTaskDetail),t.$buttonCloseTask.addEventListener("click",a.closeTaskDetail),t.$descriptionTaskDetail.addEventListener("blur",a.saveTask),t.$titleTaskDetail.addEventListener("blur",a.saveTask),t.$titleTaskDetail.addEventListener("keyup",function(t){13===t.keyCode&&""!==this.value&&a.saveTask()}),t.$descriptionTaskDetail.addEventListener("keyup",function(t){13===t.keyCode&&""!==this.value&&a.saveTask()}),t.$body.addEventListener("click",function(t){if("task-item"===t.target.className.toLowerCase()){e=t.target.parentElement.dataset.id;a.editTask(e)}if(t.target.parentElement.classList.contains("btn-task-completed")){var e=t.target.parentElement.parentElement.parentElement.dataset.id;a.completedTask(e)}})},renderTasksList:function(e){var s=document.createElement("li"),a=document.createElement("button"),i=document.createElement("img"),n=document.createElement("span"),o=document.createTextNode(e.title),r=document.createAttribute("src"),l=document.createAttribute("data-id"),c=document.createAttribute("class"),d=document.createAttribute("class");l.value=e.id,r.value="assets/images/check.svg",d.value="icon check btn-task-completed",c.value="task-item",i.setAttributeNode(r),a.setAttributeNode(d),n.setAttributeNode(c),n.appendChild(a),a.appendChild(i),n.appendChild(o),s.setAttributeNode(l),s.appendChild(n),t.$listTasks.appendChild(s)},destroyListTasks:function(){t.$listTasks.innerHTML=""},listTasks:function(){return s.listTasks()},getLastTask:function(){return s.getLastTask()},createListTasks:function(){a.destroyListTasks(),a.listTasks().map(a.renderTasksList)},clearTaskDetail:function(){a.populateTask()},openTaskDetail:function(){a.clearTaskDetail(),t.$taskDetail.show()},closeTaskDetail:function(){a.clearTaskDetail(),t.$taskDetail.hide()},populateTask:function(e){t.$idTaskDetail.value=e&&e.id||"",t.$titleTaskDetail.value=e&&e.title||"",t.$descriptionTaskDetail.value=e&&e.description||""},editTask:function(e){var i=s.getTask(e);a.populateTask(i),t.$taskDetail.show()},saveTask:function(){if(""!==t.$titleTaskDetail.value){a.destroyListTasks();var e={id:t.$idTaskDetail.value,title:t.$titleTaskDetail.value,description:t.$descriptionTaskDetail.value};if(""!==t.$idTaskDetail.value)return void s.updateTask(e,function(){a.listTasks().map(a.createListTasks)});e.order=s.getTasksLength(),s.createTask(e,function(){a.listTasks().map(a.createListTasks),a.populateTask(a.getLastTask())})}},completedTask:function(t){a.destroyListTasks(),a.closeTaskDetail(),s.completedTask(t,function(){a.listTasks().map(a.createListTasks)})}};document.addEventListener("DOMContentLoaded",function(){s.init()})}(DOM);
//# sourceMappingURL=app.min.js.map
