{"version":3,"sources":["_DOM.js","_Task.js","_Help.js","app.js"],"names":["Task","option","this","id","Math","random","toString","substr","title","description","order","DOM","$body","document","querySelector","$taskDetail","$listTasks","$tasks","querySelectorAll","$buttonAddTask","$buttonCloseTask","$idTaskDetail","$titleTaskDetail","$descriptionTaskDetail","HTMLElement","prototype","show","style","display","hide","Array","last","length","MODEL","tasks","init","localStorage","todo","JSON","stringify","parse","getTasksLength","orderBy","a","b","x","y","listTasks","sort","getTask","find","t","getLastTask","createTask","task","push","updateTask","index","indexOf","updateLocalStorage","removeTask","splice","CONTROLLER","console","log","VIEW","callback","completedTask","createListTasks","addEventListener","openTaskDetail","closeTaskDetail","saveTask","event","keyCode","value","target","className","toLowerCase","parentElement","dataset","editTask","classList","contains","renderTasksList","$li","createElement","$button","$img","$span","createTextNode","attrSrc","createAttribute","attrData","attrSpanClass","attrDivClass","setAttributeNode","appendChild","destroyListTasks","innerHTML","map","clearTaskDetail","populateTask"],"mappings":"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","file":"app.min.js","sourcesContent":["'use strict';\n\nvar DOM = {\n    $body: document.querySelector( 'body' ),\n    $taskDetail: document.querySelector( '.task-detail' ),\n    $listTasks: document.querySelector( '#tasksList' ),\n    $tasks: document.querySelectorAll( '#tasksList span' ),\n    $buttonAddTask: document.querySelector( '#addTask' ),\n    $buttonCloseTask: document.querySelector( '#closeTask' ),\n    $idTaskDetail: document.querySelector( '#idTaskDetail' ),\n    $titleTaskDetail: document.querySelector( '#titleTaskDetail' ),\n    $descriptionTaskDetail: document.querySelector( '#descriptionTaskDetail' )\n};\n","'use strict';\n\nfunction Task( option ) {\n    this.id = option && option.id || Math.random().toString( 36 ).substr( 2, 9 );\n    this.title = option && option.title || '';\n    this.description = option && option.description || '';\n    this.order = option && option.order || '';\n}\n","'use strict';\n\nHTMLElement.prototype.show = function() {\n    return this.style.display = '';\n};\n\nHTMLElement.prototype.hide = function() {\n    return this.style.display = 'none';\n};\n\nArray.prototype.last = function(){\n    return this[ this.length - 1 ];\n};\n",";(function( DOM ) {\n\n    'use strict';\n\n    var MODEL = {\n\n        tasks: null,\n\n        init: function() {\n            if ( !localStorage.todo ) {\n                localStorage.todo = JSON.stringify([\n                    new Task( { title: 'Make it better!', description: 'Lorem dfshufdhsua fds hfdhsau df', order: 1 } ),\n                    new Task( { title: 'Work it harder', description: 'Lorem dfshufdhsua fds hfdhsau df', order: 0 } )\n                ]);\n            }\n\n            this.tasks = JSON.parse(localStorage.todo);\n        },\n\n        getTasksLength: function() {\n            return this.tasks.length;\n        },\n\n        orderBy: function( a, b ) {\n            var x = a.order;\n            var y = b.order;\n            return x < y ? -1 : x > y ? 1 : 0;\n        },\n\n        listTasks: function() {\n            return this.tasks.sort( this.orderBy );\n        },\n\n        getTask: function( id ) {\n            return this.tasks.find(function( t ) {\n                return id == t.id;\n            });\n        },\n\n        getLastTask: function() {\n            return this.listTasks().last();\n        },\n\n        createTask: function( task ) {\n            this.tasks.push( new Task( task ) );\n        },\n\n        updateTask: function( task ) {\n            var t     = this.getTask( task.id );\n            var index = this.tasks.indexOf( t );\n\n            this.tasks[ index ].title = task.title;\n            this.tasks[ index ].description = task.description;\n\n            this.updateLocalStorage();\n        },\n\n        removeTask: function( id ) {\n            var task  = this.getTask( id );\n            var index = this.tasks.indexOf( task );\n\n            this.tasks.splice( index, 1 );\n\n            this.updateLocalStorage();\n        },\n\n        updateLocalStorage: function() {\n            localStorage.todo = JSON.stringify( this.tasks );\n        }\n\n    };\n\n    var CONTROLLER = {\n\n        init: function() {\n            console.log( '%c --- App Init ---', 'font-size: 14px; color:#ff7381;' );\n            console.log( '%c Name: Thiago Capelo', 'font-size:12px;' );\n            console.log( '%c [ Github, Codepen ]: @thiagokpelo', 'font-size:10px;' );\n            console.log( '%c [ Whats ]: (55 11) 9 9901 4998', 'font-size:10px;' );\n            console.log( '%c Obrigado!! %s', 'font-size:12px;color:#ff7381', 'ðŸ––' )\n\n            MODEL.init();\n            VIEW.init();\n        },\n\n        listTasks: function() {\n            return MODEL.listTasks();\n        },\n\n        getTask: function( id ) {\n            return MODEL.getTask( id );\n        },\n\n        getLastTask: function() {\n            return MODEL.getLastTask();\n        },\n\n        createTask: function( task, callback ) {\n            MODEL.createTask( task );\n            callback();\n        },\n\n        updateTask: function( task, callback ) {\n            MODEL.updateTask( task );\n            callback();\n        },\n\n        completedTask: function( id, callback ) {\n            MODEL.removeTask( id );\n            callback();\n        },\n\n        getTasksLength: function() {\n            return MODEL.getTasksLength();\n        }\n    };\n\n    var VIEW = {\n\n        init: function() {\n            DOM.$taskDetail.hide();\n            VIEW.createListTasks();\n\n            DOM.$buttonAddTask.addEventListener( 'click', VIEW.openTaskDetail );\n            DOM.$buttonCloseTask.addEventListener( 'click', VIEW.closeTaskDetail );\n            DOM.$descriptionTaskDetail.addEventListener( 'blur', VIEW.saveTask );\n            DOM.$titleTaskDetail.addEventListener( 'blur', VIEW.saveTask );\n\n            DOM.$titleTaskDetail.addEventListener( 'keyup', function( event ) {\n                if( event.keyCode === 13 && this.value !== '' ) {\n                    VIEW.saveTask();\n                }\n            });\n\n            DOM.$descriptionTaskDetail.addEventListener( 'keyup', function( event ) {\n                if( event.keyCode === 13 && this.value !== '' ) {\n                    VIEW.saveTask();\n                }\n            });\n\n            DOM.$body.addEventListener( 'click', function( event ) {\n                if ( event.target.className.toLowerCase() === 'task-item' ) {\n                    var id = event.target.parentElement.dataset.id;\n                    VIEW.editTask( id );\n                }\n\n                if ( event.target.parentElement.classList.contains( 'btn-task-completed' ) ) {\n                    var id = event.target.parentElement.parentElement.parentElement.dataset.id;\n                    VIEW.completedTask( id );\n                }\n            });\n        },\n\n        renderTasksList: function( task ) {\n            var $li             = document.createElement( 'li' );\n            var $button         = document.createElement( 'button' );\n            var $img            = document.createElement( 'img' );\n            var $span           = document.createElement( 'span' );\n            var title           = document.createTextNode( task.title );\n            var attrSrc         = document.createAttribute( 'src' );\n            var attrData        = document.createAttribute( 'data-id' );\n            var attrSpanClass   = document.createAttribute( 'class' );\n            var attrDivClass    = document.createAttribute( 'class' );\n\n            attrData.value = task.id;\n            attrSrc.value = 'assets/images/check.svg';\n            attrDivClass.value = 'icon check btn-task-completed';\n            attrSpanClass.value = 'task-item';\n\n            $img.setAttributeNode( attrSrc );\n            $button.setAttributeNode( attrDivClass );\n            $span.setAttributeNode( attrSpanClass );\n\n            $span.appendChild( $button );\n            $button.appendChild( $img );\n            $span.appendChild( title );\n\n            $li.setAttributeNode( attrData );\n            $li.appendChild( $span );\n\n            DOM.$listTasks.appendChild( $li );\n        },\n\n        destroyListTasks: function() {\n            DOM.$listTasks.innerHTML = '';\n        },\n\n        listTasks: function() {\n            return CONTROLLER.listTasks();\n        },\n\n        getLastTask: function() {\n            return CONTROLLER.getLastTask();\n        },\n\n        createListTasks: function() {\n            VIEW.destroyListTasks();\n            VIEW.listTasks().map( VIEW.renderTasksList );\n        },\n\n        clearTaskDetail: function() {\n            VIEW.populateTask();\n        },\n\n        openTaskDetail: function() {\n            VIEW.clearTaskDetail();\n            DOM.$taskDetail.show();\n        },\n\n        closeTaskDetail: function() {\n            VIEW.clearTaskDetail();\n            DOM.$taskDetail.hide();\n        },\n\n        populateTask: function( task ) {\n            DOM.$idTaskDetail.value = task && task.id || '';\n            DOM.$titleTaskDetail.value = task && task.title || '';\n            DOM.$descriptionTaskDetail.value = task && task.description || '';\n        },\n\n        editTask: function( id ) {\n            var task = CONTROLLER.getTask( id );\n            VIEW.populateTask( task );\n\n            DOM.$taskDetail.show();\n        },\n\n        saveTask: function() {\n\n            if ( DOM.$titleTaskDetail.value !== '' ) {\n                VIEW.destroyListTasks();\n\n                var task = {\n                    id: DOM.$idTaskDetail.value,\n                    title: DOM.$titleTaskDetail.value,\n                    description: DOM.$descriptionTaskDetail.value,\n                };\n\n                if ( DOM.$idTaskDetail.value !== '' ) {\n                    CONTROLLER.updateTask( task, function() {\n                        VIEW.listTasks().map( VIEW.createListTasks );\n                    });\n                    return;\n                }\n\n                task.order = CONTROLLER.getTasksLength();\n\n                CONTROLLER.createTask( task, function() {\n                    VIEW.listTasks().map( VIEW.createListTasks );\n                    VIEW.populateTask( VIEW.getLastTask() );\n                });\n            }\n        },\n\n        completedTask: function( id ) {\n            VIEW.destroyListTasks();\n            VIEW.closeTaskDetail();\n\n            CONTROLLER.completedTask( id, function() {\n                VIEW.listTasks().map( VIEW.createListTasks );\n            });\n        }\n    };\n\n    document.addEventListener( 'DOMContentLoaded', function() {\n        CONTROLLER.init();\n    });\n\n})( DOM );\n"]}